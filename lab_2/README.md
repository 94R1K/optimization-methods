# Лабораторная работа 2

## Плохой Dockerfile

```dockerfile
FROM ubuntu:latest

RUN apt-get install -y python3 python3-pip
RUN apt-get update
RUN apt-get install -y vim wget

ADD . /application

RUN cd /application && pip install -r requirements.txt && rm -rf /var/lib/apt/lists/*

CMD python3 app.py
```

#### Ошибки
1. **Использование `apt-get install` до `apt-get update`**: нарушает порядок установки пакетов.
2. **Лишние пакеты (`vim`, `wget`)**: увеличивают размер образа и могут быть неиспользуемыми.
3. **Использование `ADD` вместо `COPY`**: небезопасно и может повлиять на сборку.
4. **Очистка кеша `apt` после установки в том же слое**: это делает очистку неэффективной.
5. **Неявная команда `CMD`**: не использует массив, что может вызвать проблемы с аргументами.

## Хороший Dockerfile

```dockerfile
FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt ./
RUN pip install --no-cache-dir -r requirements.txt

COPY . ./

CMD ["python3", "app.py"]
```

#### Исправления
1. **Удалены команды `apt-get`**: базовый образ уже содержит необходимые зависимости для Python.
2. **Удалены ненужные пакеты (`vim`, `wget`)**: уменьшен размер образа.
3. **Заменено `ADD` на `COPY`**: повышена предсказуемость копирования файлов.
4. **Удалена лишняя очистка кеша `apt`**: она не требуется при отсутствии `apt-get` команд.
5. **Обновлена команда `CMD`**: используется массив для выполнения команды безопасно.

---

### Плохие практики при работе с контейнерами

1. **Хранение данных внутри контейнера**.  
   **Почему плохо**: при удалении контейнера данные будут утеряны.  
   **Решение**: использовать volume для сохранения данных.

2. **Работа от имени root-пользователя**.  
   **Почему плохо**: повышает риск безопасности.  
   **Решение**: использовать пользователя с ограниченными правами.
